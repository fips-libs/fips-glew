if (NOT FIPS_IMPORT)
    cmake_minimum_required(VERSION 2.8)
    get_filename_component(FIPS_ROOT_DIR "../fips" ABSOLUTE)
    include("${FIPS_ROOT_DIR}/cmake/fips.cmake")
    fips_setup()
    fips_project(fips-glew)
endif()

if (FIPS_GLEWMX)
    fips_begin_lib(GLEWmx)
        include_directories(glew/src glew/include glew/include/GL)
        fips_dir(glew/include/GL)
        fips_files(glew.h)
        if (FIPS_WINDOWS)
            fips_files(wglew.h)
        elseif(FIPS_LINUX OR FIPS_MACOS)
            fips_files(glxew.h)
        endif()
        fips_dir(glew/src)
        fips_files(glew.c)
        add_definitions(-DGLEW_MX)
        add_definitions(-DGLEW_STATIC)
        add_definitions(-DGLEW_NO_GLU)
    fips_end_lib()
else()
    fips_begin_lib(GLEW)
        include_directories(glew/src glew/include glew/include/GL)
        fips_dir(glew/include/GL)
        fips_files(glew.h)
        if (FIPS_WINDOWS)
            fips_files(wglew.h)
        elseif(FIPS_LINUX OR FIPS_MACOS)
            fips_files(glxew.h)
        endif()
        fips_dir(glew/src)
        fips_files(glew.c)
        add_definitions(-DGLEW_STATIC)
        add_definitions(-DGLEW_NO_GLU)
    fips_end_lib()
endif()


if (FIPS_CLANG)
    set_target_properties(GLEW PROPERTIES COMPILE_FLAGS "-Wno-sign-compare -Wno-deprecated-declarations -fexceptions -fPIC")
elseif(FIPS_GCC)
    set_target_properties(GLEW PROPERTIES COMPILE_FLAGS "-Wno-sign-compare -fexceptions -fPIC")
elseif(FIPS_MSVC)
    set_target_properties(GLEW PROPERTIES COMPILE_FLAGS "/wd4152 /wd4204 /wd4242 /wd4244 /wd4668 /wd4996")
endif()

if (NOT FIPS_IMPORT)
    fips_finish()
endif()
